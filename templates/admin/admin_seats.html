{% extends 'admin/admin_base.html' %}
{% block title %}Seat Status{% endblock %}
{% block content %}
<h2 class="mb-4 text-light">Seat Status</h2>
{% if seat_map %}
  {% for show, data in seat_map.items() %}
    <h5 class="text-info">{{ show.movie.title }} <small>({{ show.date.strftime('%d-%b-%Y') }}, {{ show.time.strftime('%H:%M') }})</small></h5>
    <div class="table-responsive mb-4">
      <table class="table table-sm table-bordered table-dark">
        <tr>
          <th>Seat #</th>
          <th>Status</th>
          <th>Booked For</th>
          <th>Booked By</th>
          <th>User Role</th>
          <th>Email</th>
        </tr>
        {% for seat in data.all_seats %}
        <tr>
          <td>{{ seat.label }}</td>
          {% if seat.id in data.booked_seat_ids %}
            <td class="text-success fw-bold">Booked</td>
            <td>{{ data.booked_seat_ids[seat.id].category or 'Self' }}</td>
            <td>{{ data.booked_seat_ids[seat.id].user }}</td>
            <td>{{ data.booked_seat_ids[seat.id].role }}</td>
            <td>{{ data.booked_seat_ids[seat.id].email }}</td>
          {% else %}
            <td style="color:#ccc;">Available</td>
            <td colspan="4"></td>
          {% endif %}
        </tr>
        {% endfor %}
      </table>
    </div>
  {% endfor %}
{% else %}
  <div class="alert alert-warning">No showtimes found.</div>
{% endif %}
{% endblock %}
